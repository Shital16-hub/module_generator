[
  {
    "test_id": "TC-PAY-002",
    "title": "Verify Payment Failure Handling with Declined Card",
    "objective": "To verify that the system properly handles a declined credit card and displays appropriate error messages",
    "priority": "High",
    "status": "Approved",
    "module": "Payment",
    "test_type": "Negative Testing",
    "automation_status": "Automated",
    "estimated_time": "8 minutes",
    "created_by": "QA Lead",
    "created_date": "2024-09-20",
    "last_updated": "2024-11-15",
    "linked_stories": [
      "PAY-001"
    ],
    "linked_requirements": [
      "REQ-PAY-003"
    ],
    "test_data_required": [
      "Declined test card",
      "Test user account"
    ],
    "environment": "Staging",
    "preconditions": [
      "User is logged into the platform",
      "User has items in cart",
      "Test declined card credentials available"
    ],
    "test_steps": [
      {
        "step_number": 1,
        "action": "Navigate to checkout and proceed to payment page",
        "expected_result": "Payment page loads successfully",
        "test_data": null
      },
      {
        "step_number": 2,
        "action": "Select 'Credit Card' as payment method",
        "expected_result": "Credit card form displays",
        "test_data": null
      },
      {
        "step_number": 3,
        "action": "Enter declined test card details: Card Number: '4000000000000002', Expiry: '12/25', CVV: '123'",
        "expected_result": "Card details accepted (format validation passes)",
        "test_data": "Test declined card: 4000000000000002"
      },
      {
        "step_number": 4,
        "action": "Click 'Place Order' button",
        "expected_result": "Order submission attempted, payment processing begins",
        "test_data": null
      },
      {
        "step_number": 5,
        "action": "Observe payment processing",
        "expected_result": "Payment gateway returns declined status",
        "test_data": null
      },
      {
        "step_number": 6,
        "action": "Verify error message displayed to user",
        "expected_result": "Clear error message: 'Your card was declined. Please try a different payment method or contact your bank.'",
        "test_data": null
      },
      {
        "step_number": 7,
        "action": "Verify user remains on payment page",
        "expected_result": "User stays on payment page, can retry with different card",
        "test_data": null
      },
      {
        "step_number": 8,
        "action": "Verify order status in system",
        "expected_result": "Order status is 'Pending' or 'Payment Failed', not 'Confirmed'",
        "test_data": null
      },
      {
        "step_number": 9,
        "action": "Verify inventory is not decremented",
        "expected_result": "Product stock levels remain unchanged",
        "test_data": null
      },
      {
        "step_number": 10,
        "action": "Verify no confirmation email sent",
        "expected_result": "No order confirmation email in inbox",
        "test_data": null
      }
    ],
    "expected_results": [
      "Payment declined properly",
      "User-friendly error message displayed",
      "User can retry payment",
      "No order confirmation",
      "Inventory unchanged",
      "Transaction logged for fraud detection"
    ],
    "actual_results": "As expected",
    "pass_fail": "Pass",
    "test_execution_history": [
      {
        "execution_date": "2024-11-15",
        "executed_by": "QA Engineer 1",
        "result": "Pass",
        "duration": "7 minutes",
        "environment": "Staging",
        "notes": "Error handling working correctly"
      }
    ],
    "defects_found": [],
    "notes": "Test with multiple declined card scenarios: insufficient funds, expired card, invalid CVV",
    "labels": [
      "negative-test",
      "error-handling",
      "payment"
    ]
  }
]